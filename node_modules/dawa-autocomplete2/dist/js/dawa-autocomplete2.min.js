!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).dawaAutocomplete={})}(this,function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),r=t(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),o=(r.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),i=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e},u=function(e){try{return!!e()}catch(e){return!0}},s=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),a=n.document,c=o(a)&&o(a.createElement),l=function(e){return c?a.createElement(e):{}},f=!s&&!u(function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}),p=Object.defineProperty,d={f:s?Object.defineProperty:function(e,t,n){if(i(e),t=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(t,!0),i(n),f)try{return p(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},h=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},v=s?function(e,t,n){return d.f(e,t,h(1,n))}:function(e,t,n){return e[t]=n,e},g={}.hasOwnProperty,y=function(e,t){return g.call(e,t)},m=0,b=Math.random(),x=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++m+b).toString(36))},_=t(function(e){var t=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:r.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),w=_("native-function-to-string",Function.toString),k=t(function(e){var t=x("src"),o=(""+w).split("toString");r.inspectSource=function(e){return w.call(e)},(e.exports=function(e,r,i,u){var s="function"==typeof i;s&&(y(i,"name")||v(i,"name",r)),e[r]!==i&&(s&&(y(i,t)||v(i,t,e[r]?""+e[r]:o.join(String(r)))),e===n?e[r]=i:u?e[r]?e[r]=i:v(e,r,i):(delete e[r],v(e,r,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||w.call(this)})}),S=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},O=function(e,t,n){if(S(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},C=function(e,t,o){var i,u,s,a,c=e&C.F,l=e&C.G,f=e&C.S,p=e&C.P,d=e&C.B,h=l?n:f?n[t]||(n[t]={}):(n[t]||{}).prototype,g=l?r:r[t]||(r[t]={}),y=g.prototype||(g.prototype={});for(i in l&&(o=t),o)s=((u=!c&&h&&void 0!==h[i])?h:o)[i],a=d&&u?O(s,n):p&&"function"==typeof s?O(Function.call,s):s,h&&k(h,i,s,e&C.U),g[i]!=s&&v(g,i,a),p&&y[i]!=s&&(y[i]=s)};n.core=r,C.F=1,C.G=2,C.S=4,C.P=8,C.B=16,C.W=32,C.U=64,C.R=128;var j,R=C,A={}.toString,E=function(e){return A.call(e).slice(8,-1)},T=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==E(e)?e.split(""):Object(e)},P=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},L=function(e){return T(P(e))},M=Math.ceil,I=Math.floor,q=function(e){return isNaN(e=+e)?0:(e>0?I:M)(e)},D=Math.min,N=function(e){return e>0?D(q(e),9007199254740991):0},F=Math.max,z=Math.min,U=_("keys"),B=function(e){return U[e]||(U[e]=x(e))},G=(j=!1,function(e,t,n){var r,o=L(e),i=N(o.length),u=function(e,t){return(e=q(e))<0?F(e+t,0):z(e,t)}(n,i);if(j&&t!=t){for(;i>u;)if((r=o[u++])!=r)return!0}else for(;i>u;u++)if((j||u in o)&&o[u]===t)return j||u||0;return!j&&-1}),V=B("IE_PROTO"),$="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),H=Object.keys||function(e){return function(e,t){var n,r=L(e),o=0,i=[];for(n in r)n!=V&&y(r,n)&&i.push(n);for(;t.length>o;)y(r,n=t[o++])&&(~G(i,n)||i.push(n));return i}(e,$)},W={f:Object.getOwnPropertySymbols},K={f:{}.propertyIsEnumerable},X=function(e){return Object(P(e))},J=Object.assign,Q=!J||u(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=J({},e)[n]||Object.keys(J({},t)).join("")!=r})?function(e,t){for(var n=X(e),r=arguments.length,o=1,i=W.f,u=K.f;r>o;)for(var s,a=T(arguments[o++]),c=i?H(a).concat(i(a)):H(a),l=c.length,f=0;l>f;)u.call(a,s=c[f++])&&(n[s]=a[s]);return n}:J;R(R.S+R.F,"Object",{assign:Q});var Y,Z,ee,te=(Y=!0,function(e,t){var n,r,o=String(P(e)),i=q(t),u=o.length;return i<0||i>=u?Y?"":void 0:(n=o.charCodeAt(i))<55296||n>56319||i+1===u||(r=o.charCodeAt(i+1))<56320||r>57343?Y?o.charAt(i):n:Y?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}),ne=function(e,t,n){return t+(n?te(e,t).length:1)},re=t(function(e){var t=_("wks"),r=n.Symbol,o="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=o&&r[e]||(o?r:x)("Symbol."+e))}).store=t}),oe=re("toStringTag"),ie="Arguments"==E(function(){return arguments}()),ue=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),oe))?n:ie?E(t):"Object"==(r=E(t))&&"function"==typeof t.callee?"Arguments":r},se=RegExp.prototype.exec,ae=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==ue(e))throw new TypeError("RegExp#exec called on incompatible receiver");return se.call(e,t)},ce=RegExp.prototype.exec,le=String.prototype.replace,fe=ce,pe=(Z=/a/,ee=/b*/g,ce.call(Z,"a"),ce.call(ee,"a"),0!==Z.lastIndex||0!==ee.lastIndex),de=void 0!==/()??/.exec("")[1];(pe||de)&&(fe=function(e){var t,n,r,o,u=this;return de&&(n=new RegExp("^"+u.source+"$(?!\\s)",function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}.call(u))),pe&&(t=u.lastIndex),r=ce.call(u,e),pe&&r&&(u.lastIndex=u.global?r.index+r[0].length:t),de&&r&&r.length>1&&le.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var he=fe;R({target:"RegExp",proto:!0,forced:he!==/./.exec},{exec:he});var ve=re("species"),ge=!u(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),ye=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),me=function(e,t,n){var r=re(e),o=!u(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)}),i=o?!u(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[ve]=function(){return n}),n[r](""),!t}):void 0;if(!o||!i||"replace"===e&&!ge||"split"===e&&!ye){var s=/./[r],a=n(P,r,""[e],function(e,t,n,r,i){return t.exec===he?o&&!i?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),c=a[0],l=a[1];k(String.prototype,e,c),v(RegExp.prototype,r,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)})}},be=Math.max,xe=Math.min,_e=Math.floor,we=/\$([$&`']|\d\d?|<[^>]*>)/g,ke=/\$([$&`']|\d\d?)/g;me("replace",2,function(e,t,n,r){return[function(r,o){var i=e(this),u=null==r?void 0:r[t];return void 0!==u?u.call(r,i,o):n.call(String(i),r,o)},function(e,t){var u=r(n,e,this,t);if(u.done)return u.value;var s=i(e),a=String(this),c="function"==typeof t;c||(t=String(t));var l=s.global;if(l){var f=s.unicode;s.lastIndex=0}for(var p=[];;){var d=ae(s,a);if(null===d)break;if(p.push(d),!l)break;""===String(d[0])&&(s.lastIndex=ne(a,N(s.lastIndex),f))}for(var h,v="",g=0,y=0;y<p.length;y++){d=p[y];for(var m=String(d[0]),b=be(xe(q(d.index),a.length),0),x=[],_=1;_<d.length;_++)x.push(void 0===(h=d[_])?h:String(h));var w=d.groups;if(c){var k=[m].concat(x,b,a);void 0!==w&&k.push(w);var S=String(t.apply(void 0,k))}else S=o(m,a,b,x,w,t);b>=g&&(v+=a.slice(g,b)+S,g=b+m.length)}return v+a.slice(g)}];function o(e,t,r,o,i,u){var s=r+e.length,a=o.length,c=ke;return void 0!==i&&(i=X(i),c=we),n.call(u,c,function(n,u){var c;switch(u.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(s);case"<":c=i[u.slice(1,-1)];break;default:var l=+u;if(0===l)return n;if(l>a){var f=_e(l/10);return 0===f?n:f<=a?void 0===o[f-1]?u.charAt(1):o[f-1]+u.charAt(1):n}c=o[l-1]}return void 0===c?"":c})}});var Se=re("match"),Oe=re("species"),Ce=function(e,t){var n,r=i(e).constructor;return void 0===r||null==(n=i(r)[Oe])?t:S(n)},je=Math.min,Re=[].push,Ae=!u(function(){});me("split",2,function(e,t,n,r){var u;return u="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var r,i,u=String(this);if(void 0===e&&0===t)return[];if(!o(r=e)||(void 0!==(i=r[Se])?!i:"RegExp"!=E(r)))return n.call(u,e,t);for(var s,a,c,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,d=void 0===t?4294967295:t>>>0,h=new RegExp(e.source,f+"g");(s=he.call(h,u))&&!((a=h.lastIndex)>p&&(l.push(u.slice(p,s.index)),s.length>1&&s.index<u.length&&Re.apply(l,s.slice(1)),c=s[0].length,p=a,l.length>=d));)h.lastIndex===s.index&&h.lastIndex++;return p===u.length?!c&&h.test("")||l.push(""):l.push(u.slice(p)),l.length>d?l.slice(0,d):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var o=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):u.call(String(o),n,r)},function(e,t){var o=r(u,e,this,t,u!==n);if(o.done)return o.value;var s=i(e),a=String(this),c=Ce(s,RegExp),l=s.unicode,f=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Ae?"y":"g"),p=new c(Ae?s:"^(?:"+s.source+")",f),d=void 0===t?4294967295:t>>>0;if(0===d)return[];if(0===a.length)return null===ae(p,a)?[a]:[];for(var h=0,v=0,g=[];v<a.length;){p.lastIndex=Ae?v:0;var y,m=ae(p,Ae?a:a.slice(v));if(null===m||(y=je(N(p.lastIndex+(Ae?0:v)),a.length))===h)v=ne(a,v,l);else{if(g.push(a.slice(h,v)),g.length===d)return g;for(var b=1;b<=m.length-1;b++)if(g.push(m[b]),g.length===d)return g;v=h=y}}return g.push(a.slice(h)),g}]});var Ee,Te=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={default:"__default"},r=Object.prototype.hasOwnProperty;function o(){}function i(){return new o}function u(e,t){for(;e.length>t;)e.pop()}function s(e,t,n){if(null==n)e.removeAttribute(t);else{var r=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0}(t);r?e.setAttributeNS(r,t,String(n)):e.setAttribute(t,String(n))}}function a(e,t,n){e[t]=n}function c(e,t,n){t.indexOf("-")>=0?e.setProperty(t,n):e[t]=n}o.prototype=Object.create(null);var l=i();function f(e,t,r){(l[t]||l[n.default])(e,t,r)}l[n.default]=function(e,t,n){var r=typeof n;"object"===r||"function"===r?a(e,t,n):s(e,t,n)},l.style=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var o=e.style;for(var i in n)u=n,s=i,r.call(u,s)&&c(o,i,n[i])}var u,s};var p={nodesCreated:null,nodesDeleted:null},d=function(){function e(){this.created=[],this.deleted=[]}return e.prototype.markCreated=function(e){this.created.push(e)},e.prototype.markDeleted=function(e){this.deleted.push(e)},e.prototype.notifyChanges=function(){p.nodesCreated&&this.created.length>0&&p.nodesCreated(this.created),p.nodesDeleted&&this.deleted.length>0&&p.nodesDeleted(this.deleted)},e}();function h(e){return 1===e.nodeType}var v=Node.prototype.getRootNode||function(){for(var e=this,t=e;e;)t=e,e=e.parentNode;return t};function g(e,t){var n=function(e){var t=v.call(e);return function(e){return 11===e.nodeType||9===e.nodeType}(t)?t.activeElement:null}(e);return n&&e.contains(n)?function(e,t){for(var n=[],r=e;r!==t;){var o=r;n.push(o),r=o.parentNode}return n}(n,t):[]}var y=function(){function e(e,t,n){this._attrsArr=null,this.staticsApplied=!1,this.nameOrCtor=e,this.key=t,this.text=n}return e.prototype.hasEmptyAttrsArr=function(){var e=this._attrsArr;return!e||!e.length},e.prototype.getAttrsArr=function(e){return this._attrsArr||(this._attrsArr=new Array(e))},e}();function m(e,t,n,r){var o=new y(t,n,r);return e.__incrementalDOMData=o,o}function b(e,t){return x(e,t)}function x(e,t){if(e.__incrementalDOMData)return e.__incrementalDOMData;var n=h(e)?e.localName:e.nodeName,r=h(e)?e.getAttribute("key")||t:null,o=m(e,n,r,function(e){return 3===e.nodeType}(e)?e.data:void 0);return h(e)&&function(e,t){var n=e.attributes,r=n.length;if(!r)return;for(var o=t.getAttrsArr(r),i=0,u=0;i<r;i+=1,u+=2){var s=n[i],a=s.name,c=s.value;o[u]=a,o[u+1]=c}}(e,o),o}function _(e,t,n,r){var o;if("function"==typeof n)o=new n;else{var i=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/Math/MathML":null==t?null:"foreignObject"===b(t).nameOrCtor?null:t.namespaceURI}(n,t);o=i?e.createElementNS(i,n):e.createElement(n)}return m(o,n,r),o}var w=null,k=null,S=null,O=null,C=[],j=[];function R(){return j}function A(e){return function(t,n,r){var o=w,i=O,u=C,s=j,a=k,c=S;w=new d,O=t.ownerDocument,j=[],S=t.parentNode,C=g(t,S);try{return e(t,n,r)}finally{O=i,j=s,k=a,S=c,C=u,w.notifyChanges(),w=o}}}var E=A(function(e,t,n){return k=e,q(),t(n),F(),e}),T=A(function(e,t,n){var r={nextSibling:e};return k=r,t(n),S&&I(S,D(),e.nextSibling),r===k?null:k});function P(e,t,n){var r=b(e,n);return t==r.nameOrCtor&&n==r.key}function L(e,t){var n;return n="#text"===e?function(e){var t=e.createTextNode("");return m(t,"#text",null),t}(O):_(O,S,e,t),w.markCreated(n),n}function M(e,t){var n=function(e,t,n){if(!e)return null;if(P(e,t,n))return e;if(n)for(;e=e.nextSibling;)if(P(e,t,n))return e;return null}(k,e,t)||L(e,t);n!==k&&(C.indexOf(n)>=0?function(e,t,n){for(var r=t.nextSibling,o=n;null!==o&&o!==t;){var i=o.nextSibling;e.insertBefore(o,r),o=i}}(S,n,k):S.insertBefore(n,k),k=n)}function I(e,t,n){for(var r=e,o=t;o!==n;){var i=o.nextSibling;r.removeChild(o),w.markDeleted(o),o=i}}function q(){S=k,k=null}function D(){return k?k.nextSibling:S.firstChild}function N(){k=D()}function F(){I(S,D(),null),k=S,S=S.parentNode}function z(e,t){return N(),M(e,t),q(),S}function U(){return F(),k}var B=3,G=i();function V(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var i=z(e,t),s=b(i);s.staticsApplied||function(e,t,n){if(t.staticsApplied=!0,n&&n.length)if(t.hasEmptyAttrsArr())for(var r=0;r<n.length;r+=2)f(e,n[r],n[r+1]);else{for(r=0;r<n.length;r+=2)G[n[r]]=r+1;var o=t.getAttrsArr(0),i=0;for(r=0;r<o.length;r+=2){var s=o[r],a=o[r+1],c=G[s];c?n[c]===a&&delete G[s]:(o[i]=s,o[i+1]=a,i+=2)}for(var s in u(o,i),G)f(e,s,n[G[s]]),delete G[s]}}(i,s,n);var a=Math.max(0,arguments.length-B),c=s.hasEmptyAttrsArr();if(!a&&c)return i;for(var l=s.getAttrsArr(a),p=B,d=0;p<arguments.length;p+=2,d+=2){var h=arguments[p];if(c)l[d]=h;else if(l[d]!==h)break;var v=arguments[p+1];(c||l[d+1]!==v)&&(l[d+1]=v,f(i,h,v))}if(p<arguments.length||d<l.length){for(var g=d;d<l.length;d+=2)G[l[d]]=l[d+1];for(d=g;p<arguments.length;p+=2,d+=2){h=arguments[p],v=arguments[p+1];G[h]!==v&&f(i,h,v),l[d]=h,l[d+1]=v,delete G[h]}for(var h in u(l,d),G)f(i,h,void 0),delete G[h]}return i}function $(e){return U()}t.applyAttr=s,t.applyProp=a,t.attributes=l,t.close=U,t.currentElement=function(){return S},t.currentPointer=function(){return D()},t.open=z,t.patch=E,t.patchInner=E,t.patchOuter=T,t.skip=function(){k=S.lastChild},t.skipNode=N,t.getKey=function(e){return e.__incrementalDOMData,b(e).key},t.clearCache=function e(t){t.__incrementalDOMData=null;for(var n=t.firstChild;n;n=n.nextSibling)e(n)},t.importNode=function e(t){x(t);for(var n=t.firstChild;n;n=n.nextSibling)e(n)},t.isDataInitialized=function(e){return Boolean(e.__incrementalDOMData)},t.notifications=p,t.symbols=n,t.attr=function(e,t){var n=R();n.push(e),n.push(t)},t.elementClose=$,t.elementOpen=V,t.elementOpenEnd=function(){var e=R(),t=V.apply(null,e);return u(e,0),t},t.elementOpenStart=function(e,t,n){var r=R();r[0]=e,r[1]=t,r[2]=n},t.elementVoid=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return V.apply(null,arguments),$()},t.text=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=(N(),M("#text",null),k),o=b(r);if(o.text!==e){o.text=e;for(var i=e,u=1;u<arguments.length;u+=1)i=(0,arguments[u])(i);r.data=i}return r},t.key=function(e){R()[1]=e}});(Ee=Te)&&Ee.__esModule&&Object.prototype.hasOwnProperty.call(Ee,"default")&&Ee.default;Te.applyAttr;var Pe=Te.applyProp,Le=Te.attributes,Me=(Te.close,Te.currentElement,Te.currentPointer,Te.open,Te.patch),Ie=(Te.patchInner,Te.patchOuter,Te.skip,Te.skipNode,Te.getKey,Te.clearCache,Te.importNode,Te.isDataInitialized,Te.notifications,Te.symbols,Te.attr,Te.elementClose),qe=Te.elementOpen,De=(Te.elementOpenEnd,Te.elementOpenStart,Te.elementVoid),Ne=Te.text;Te.key;Le.caretpos=function(e,t,n){e.setSelectionRange(n,n)},Le.value=Pe;var Fe=function(e,t,n,r){Me(e,function(){!function(e,t,n){if(e.suggestions.length>0&&e.focused){qe("ul","",["class","dawa-autocomplete-suggestions","role","listbox","unselectable","on"]);for(var r=function(r){var o=e.suggestions[r],i="dawa-autocomplete-suggestion";e.selected===r&&(i+=" dawa-selected"),qe("li","",["role","option"],"class",i,"onmousedown",function(e){t(r),e.preventDefault()});var u=o.forslagstekst.split("\n");if(u=u.map(function(e){return e.replace(/ /g,"Â ")}),n){Ne(u[0]);for(var s=1;s<u.length;++s)De("br"),Ne(u[s])}else Ne(u.join(", "));Ie("li")},o=0;o<e.suggestions.length;++o)r(o);Ie("ul")}}(t,n,r)})},ze=function(e,t){var n=t.onSelect,r=t.onTextChange,o=t.render||Fe,i=!1,u="",s=0,a=document.createElement("div");e.parentNode.insertBefore(a,e.nextSibling);var c,l={caretpos:2,inputText:"",selected:0,focused:document.activeElement===e,suggestions:[]},f=function(e){var t=e.value,n=e.selectionStart;l.caretpos=n,l.inputText=t,function(e,t){u===e&&s===t||(r(e,t),u=e,s=t)}(t,n)},p=function(e){var t=l.suggestions[e];l.inputText=t.tekst,l.caretpos=t.caretpos,l.suggestions=[],n(t),c(!0)},d=function(e){var t=window.event?e.keyCode:e.which;if(l.suggestions.length>0&&l.focused){if(40===t)l.selected=(l.selected+1)%l.suggestions.length,c();else if(38===t)l.selected=(l.selected-1+l.suggestions.length)%l.suggestions.length,c();else{if(13!==t&&9!==t)return!0;p(l.selected)}return e.preventDefault(),!1}},h=function(){l.focused=!0,c()},v=function(){return l.focused=!1,c(),!1},g=function(e){f(e.target)},y=function(e){return f(e.target)},m=!1,b=!1;(c=function(n){n&&(b=!0),m||(m=!0,requestAnimationFrame(function(){i||(m=!1,b&&(e.value=l.inputText,e.setSelectionRange(l.caretpos,l.caretpos)),b=!1,o(a,l,function(e){return p(e)},t.multiline))}))})();return e.addEventListener("keydown",d),e.addEventListener("blur",v),e.addEventListener("focus",h),e.addEventListener("input",g),e.addEventListener("mouseup",y),e.setAttribute("aria-autocomplete","list"),e.setAttribute("autocomplete","off"),{destroy:function(){i=!0,e.removeEventListener("keydown",d),e.removeEventListener("blur",v),e.removeEventListener("focus",h),e.removeEventListener("input",g),e.removeEventListener("mouseup",y),Me(a,function(){}),a.remove()},setSuggestions:function(e){l.suggestions=e,l.selected=0,c()},selectAndClose:function(e){l.inputText=e,l.caretpos=e.length,l.suggestions=[],l.selected=0,c(!0)}}};function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Be,Ge,Ve,$e=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}},He={},We=re("iterator"),Ke=Array.prototype,Xe=function(e){return void 0!==e&&(He.Array===e||Ke[We]===e)},Je=re("iterator"),Qe=r.getIteratorMethod=function(e){if(null!=e)return e[Je]||e["@@iterator"]||He[ue(e)]},Ye=t(function(e){var t={},n={},r=e.exports=function(e,r,o,u,s){var a,c,l,f,p=s?function(){return e}:Qe(e),d=O(o,u,r?2:1),h=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(Xe(p)){for(a=N(e.length);a>h;h++)if((f=r?d(i(c=e[h])[0],c[1]):d(e[h]))===t||f===n)return f}else for(l=p.call(e);!(c=l.next()).done;)if((f=$e(l,d,c.value,r))===t||f===n)return f};r.BREAK=t,r.RETURN=n}),Ze=n.document,et=Ze&&Ze.documentElement,tt=n.process,nt=n.setImmediate,rt=n.clearImmediate,ot=n.MessageChannel,it=n.Dispatch,ut=0,st={},at=function(){var e=+this;if(st.hasOwnProperty(e)){var t=st[e];delete st[e],t()}},ct=function(e){at.call(e.data)};nt&&rt||(nt=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return st[++ut]=function(){!function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},Be(ut),ut},rt=function(e){delete st[e]},"process"==E(tt)?Be=function(e){tt.nextTick(O(at,e,1))}:it&&it.now?Be=function(e){it.now(O(at,e,1))}:ot?(Ve=(Ge=new ot).port2,Ge.port1.onmessage=ct,Be=O(Ve.postMessage,Ve,1)):n.addEventListener&&"function"==typeof postMessage&&!n.importScripts?(Be=function(e){n.postMessage(e+"","*")},n.addEventListener("message",ct,!1)):Be="onreadystatechange"in l("script")?function(e){et.appendChild(l("script")).onreadystatechange=function(){et.removeChild(this),at.call(e)}}:function(e){setTimeout(O(at,e,1),0)});var lt={set:nt,clear:rt},ft=lt.set,pt=n.MutationObserver||n.WebKitMutationObserver,dt=n.process,ht=n.Promise,vt="process"==E(dt);function gt(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=S(t),this.reject=S(n)}var yt={f:function(e){return new gt(e)}},mt=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},bt=n.navigator,xt=bt&&bt.userAgent||"",_t=d.f,wt=re("toStringTag"),kt=function(e,t,n){e&&!y(e=n?e:e.prototype,wt)&&_t(e,wt,{configurable:!0,value:t})},St=re("species"),Ot=re("iterator"),Ct=!1;try{[7][Ot]().return=function(){Ct=!0}}catch(e){}var jt,Rt,At,Et,Tt,Pt=lt.set,Lt=function(){var e,t,r,o=function(){var n,o;for(vt&&(n=dt.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(vt)r=function(){dt.nextTick(o)};else if(!pt||n.navigator&&n.navigator.standalone)if(ht&&ht.resolve){var i=ht.resolve(void 0);r=function(){i.then(o)}}else r=function(){ft.call(n,o)};else{var u=!0,s=document.createTextNode("");new pt(o).observe(s,{characterData:!0}),r=function(){s.data=u=!u}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}(),Mt=n.TypeError,It=n.process,qt=It&&It.versions,Dt=qt&&qt.v8||"",Nt=n.Promise,Ft="process"==ue(It),zt=function(){},Ut=Rt=yt.f,Bt=!!function(){try{var e=Nt.resolve(1),t=(e.constructor={})[re("species")]=function(e){e(zt,zt)};return(Ft||"function"==typeof PromiseRejectionEvent)&&e.then(zt)instanceof t&&0!==Dt.indexOf("6.6")&&-1===xt.indexOf("Chrome/66")}catch(e){}}(),Gt=function(e){var t;return!(!o(e)||"function"!=typeof(t=e.then))&&t},Vt=function(e,t){if(!e._n){e._n=!0;var n=e._c;Lt(function(){for(var r=e._v,o=1==e._s,i=0,u=function(t){var n,i,u,s=o?t.ok:t.fail,a=t.resolve,c=t.reject,l=t.domain;try{s?(o||(2==e._h&&Wt(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),u=!0)),n===t.promise?c(Mt("Promise-chain cycle")):(i=Gt(n))?i.call(n,a,c):a(n)):c(r)}catch(e){l&&!u&&l.exit(),c(e)}};n.length>i;)u(n[i++]);e._c=[],e._n=!1,t&&!e._h&&$t(e)})}},$t=function(e){Pt.call(n,function(){var t,r,o,i=e._v,u=Ht(e);if(u&&(t=mt(function(){Ft?It.emit("unhandledRejection",i,e):(r=n.onunhandledrejection)?r({promise:e,reason:i}):(o=n.console)&&o.error&&o.error("Unhandled promise rejection",i)}),e._h=Ft||Ht(e)?2:1),e._a=void 0,u&&t.e)throw t.v})},Ht=function(e){return 1!==e._h&&0===(e._a||e._c).length},Wt=function(e){Pt.call(n,function(){var t;Ft?It.emit("rejectionHandled",e):(t=n.onrejectionhandled)&&t({promise:e,reason:e._v})})},Kt=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Vt(t,!0))},Xt=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw Mt("Promise can't be resolved itself");(t=Gt(e))?Lt(function(){var r={_w:n,_d:!1};try{t.call(e,O(Xt,r,1),O(Kt,r,1))}catch(e){Kt.call(r,e)}}):(n._v=e,n._s=1,Vt(n,!1))}catch(e){Kt.call({_w:n,_d:!1},e)}}};Bt||(Nt=function(e){!function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!")}(this,Nt,"Promise","_h"),S(e),jt.call(this);try{e(O(Xt,this,1),O(Kt,this,1))}catch(e){Kt.call(this,e)}},(jt=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var r in t)k(e,r,t[r],n);return e}(Nt.prototype,{then:function(e,t){var n=Ut(Ce(this,Nt));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=Ft?It.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Vt(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),At=function(){var e=new jt;this.promise=e,this.resolve=O(Xt,e,1),this.reject=O(Kt,e,1)},yt.f=Ut=function(e){return e===Nt||e===Et?new At(e):Rt(e)}),R(R.G+R.W+R.F*!Bt,{Promise:Nt}),kt(Nt,"Promise"),Tt=n["Promise"],s&&Tt&&!Tt[St]&&d.f(Tt,St,{configurable:!0,get:function(){return this}}),Et=r.Promise,R(R.S+R.F*!Bt,"Promise",{reject:function(e){var t=Ut(this);return(0,t.reject)(e),t.promise}}),R(R.S+R.F*!Bt,"Promise",{resolve:function(e){return function(e,t){if(i(e),o(t)&&t.constructor===e)return t;var n=yt.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),R(R.S+R.F*!(Bt&&function(e,t){if(!t&&!Ct)return!1;var n=!1;try{var r=[7],o=r[Ot]();o.next=function(){return{done:n=!0}},r[Ot]=function(){return o},e(r)}catch(e){}return n}(function(e){Nt.all(e).catch(zt)})),"Promise",{all:function(e){var t=this,n=Ut(t),r=n.resolve,o=n.reject,i=mt(function(){var n=[],i=0,u=1;Ye(e,!1,function(e){var s=i++,a=!1;n.push(void 0),u++,t.resolve(e).then(function(e){a||(a=!0,n[s]=e,--u||r(n))},o)}),--u||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=Ut(t),r=n.reject,o=mt(function(){Ye(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}});var Jt=re("unscopables"),Qt=Array.prototype;null==Qt[Jt]&&v(Qt,Jt,{});var Yt=function(e){Qt[Jt][e]=!0},Zt=function(e,t){return{value:t,done:!!e}},en=s?Object.defineProperties:function(e,t){i(e);for(var n,r=H(t),o=r.length,u=0;o>u;)d.f(e,n=r[u++],t[n]);return e},tn=B("IE_PROTO"),nn=function(){},rn=function(){var e,t=l("iframe"),n=$.length;for(t.style.display="none",et.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),rn=e.F;n--;)delete rn.prototype[$[n]];return rn()},on=Object.create||function(e,t){var n;return null!==e?(nn.prototype=i(e),n=new nn,nn.prototype=null,n[tn]=e):n=rn(),void 0===t?n:en(n,t)},un={};v(un,re("iterator"),function(){return this});var sn=function(e,t,n){e.prototype=on(un,{next:h(1,n)}),kt(e,t+" Iterator")},an=B("IE_PROTO"),cn=Object.prototype,ln=Object.getPrototypeOf||function(e){return e=X(e),y(e,an)?e[an]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?cn:null},fn=re("iterator"),pn=!([].keys&&"next"in[].keys()),dn=function(){return this},hn=function(e,t,n,r,o,i,u){sn(n,t,r);var s,a,c,l=function(e){if(!pn&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",p="values"==o,d=!1,h=e.prototype,g=h[fn]||h["@@iterator"]||o&&h[o],y=g||l(o),m=o?p?l("entries"):y:void 0,b="Array"==t&&h.entries||g;if(b&&(c=ln(b.call(new e)))!==Object.prototype&&c.next&&(kt(c,f,!0),"function"!=typeof c[fn]&&v(c,fn,dn)),p&&g&&"values"!==g.name&&(d=!0,y=function(){return g.call(this)}),(pn||d||!h[fn])&&v(h,fn,y),He[t]=y,He[f]=dn,o)if(s={values:p?y:l("values"),keys:i?y:l("keys"),entries:m},u)for(a in s)a in h||k(h,a,s[a]);else R(R.P+R.F*(pn||d),t,s);return s}(Array,"Array",function(e,t){this._t=L(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Zt(1)):Zt(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values");He.Arguments=He.Array,Yt("keys"),Yt("values"),Yt("entries");for(var vn=re("iterator"),gn=re("toStringTag"),yn=He.Array,mn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},bn=H(mn),xn=0;xn<bn.length;xn++){var _n,wn=bn[xn],kn=mn[wn],Sn=n[wn],On=Sn&&Sn.prototype;if(On&&(On[vn]||v(On,vn,yn),On[gn]||v(On,gn,wn),He[wn]=yn,kn))for(_n in hn)On[_n]||k(On,_n,hn[_n],!0)}var Cn={};Cn[re("toStringTag")]="z",Cn+""!="[object z]"&&k(Object.prototype,"toString",function(){return"[object "+ue(this)+"]"},!0);!function(e,t){var n=(r.Object||{})[e]||Object[e],o={};o[e]=t(n),R(R.S+R.F*u(function(){n(1)}),"Object",o)}("keys",function(){return function(e){return H(X(e))}});var jn={params:{},minLength:2,retryDelay:500,renderCallback:function(){console.error("No renderCallback supplied")},initialRenderCallback:function(){console.error("No initialRenderCallback supplied")},type:"adresse",baseUrl:"https://dawa.aws.dk",adgangsadresserOnly:!1,stormodtagerpostnumre:!0,supplerendebynavn:!0,fuzzy:!0,fetchImpl:function(e,t){return(n="".concat(e,"?").concat(function(e){return Object.keys(e).map(function(t){var n=e[t];return"".concat(t,"=").concat(encodeURIComponent(n))}).join("&")}(t)),r={mode:"cors"},r=r||{},new Promise(function(e,t){var o=new XMLHttpRequest,i=[],u=[],s={},a=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(JSON.parse(o.responseText))},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:a,headers:{keys:function(){return i},entries:function(){return u},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var c in o.open(r.method||"get",n,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){i.push(t=t.toLowerCase()),u.push([t,n]),s[t]=s[t]?s[t]+","+n:n}),e(a())},o.onerror=t,o.withCredentials="include"==r.credentials,r.headers)o.setRequestHeader(c,r.headers[c]);o.send(r.body||null)})).then(function(e){return e.json()});var n,r}},Rn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=Object.assign({},jn,t||{}),this.options=t,this.state={currentRequest:null,pendingRequest:null},this.selected=null}var t,n,r;return t=e,(n=[{key:"_getAutocompleteResponse",value:function(e,t,n,r,o,i){var u=Object.assign({},this.options.params,{q:e,type:this.options.type,caretpos:t,supplerendebynavn:o,stormodtagerpostnumre:i,multilinje:!0});return this.options.fuzzy&&(u.fuzzy=""),r&&(u.adgangsadresseid=r),n&&(u.startfra="adgangsadresse"),this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),u)}},{key:"_scheduleRequest",value:function(e){null!==this.state.currentRequest?this.state.pendingRequest=e:(this.state.currentRequest=e,this._executeRequest())}},{key:"_executeRequest",value:function(){var e,t,n=this,r=this.state.currentRequest,o=null,i=!1;if(r.selected){var u=r.selected;if(u.type===this.options.type)return this.options.selectCallback(u),this.selected=u,void this._requestCompleted();o="adgangsadresse"===u.type?u.data.id:null,i="vejnavn"===u.type,e=u.tekst,t=u.caretpos}else e=r.text,t=r.caretpos;if(r.selectedId){var s={id:r.selectedId,type:this.options.type};return this.options.fetchImpl("".concat(this.options.baseUrl,"/autocomplete"),s).then(function(e){return n._handleResponse(r,e)},function(e){return n._handleFailedRequest(r,e)})}r.selected||r.text.length>=this.options.minLength?this._getAutocompleteResponse(e,t,i,o,this.options.supplerendebynavn,this.options.stormodtagerpostnumre).then(function(e){return n._handleResponse(r,e)},function(e){return n._handleFailedRequest(r,e)}):this._handleResponse(r,[])}},{key:"_handleFailedRequest",value:function(e,t){var n,r=this;return console.error("DAWA request failed",t),(n=this.options.retryDelay,new Promise(function(e){return setTimeout(e,n)})).then(function(){r.state.pendingRequest||r._scheduleRequest(e),r._requestCompleted()})}},{key:"_handleResponse",value:function(e,t){if(e.selected)if(1===t.length){var n=t[0];n.type===this.options.type?this.options.selectCallback(n):this.state.pendingRequest||(this.state.pendingRequest={selected:n})}else this.options.renderCallback&&this.options.renderCallback(t);else e.selectedId?1===t.length&&(this.selected=t[0],this.options.initialRenderCallback(t[0].tekst)):this.options.renderCallback&&this.options.renderCallback(t);this._requestCompleted()}},{key:"_requestCompleted",value:function(){this.state.currentRequest=this.state.pendingRequest,this.state.pendingRequest=null,this.state.currentRequest&&this._executeRequest()}},{key:"setRenderCallback",value:function(e){this.options.renderCallback=e}},{key:"setInitialRenderCallback",value:function(e){this.options.initialRenderCallback=e}},{key:"setSelectCallback",value:function(e){this.options.selectCallback=e}},{key:"update",value:function(e,t){var n={text:e,caretpos:t};this._scheduleRequest(n)}},{key:"select",value:function(e){var t={selected:e};this._scheduleRequest(t)}},{key:"selectInitial",value:function(e){var t={selectedId:e};this._scheduleRequest(t)}},{key:"destroy",value:function(){}}])&&Ue(t.prototype,n),r&&Ue(t,r),e}();e.dawaAutocomplete=function(e,t){t=Object.assign({select:function(){return null}},t);var n=["baseUrl","minLength","params","fuzzy","stormodtagerpostnumre","supplerendebynavn","type"].reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{});n.type||(t.adgangsadresserOnly?n.type="adgangsadresse":n.type="adresse");var r=new Rn(n),o=ze(e,{onSelect:function(e){r.select(e)},onTextChange:function(e,t){r.update(e,t)},render:t.render,multiline:t.multiline||!1});return r.setRenderCallback(function(e){return o.setSuggestions(e)}),r.setSelectCallback(function(e){o.selectAndClose(e.tekst),t.select(e)}),r.setInitialRenderCallback(function(e){return o.selectAndClose(e)}),t.id&&r.selectInitial(t.id),{id:function(e){return r.selectInitial(e)},destroy:function(){return o.destroy()},selected:function(){return r.selected}}},Object.defineProperty(e,"__esModule",{value:!0})});
